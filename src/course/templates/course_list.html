<div>

	{% with user.student.course_set.all as courses %}

		{% for course in course_list %}
			<div class="row">
				<div class="col-xs-6">
					<large>
						<a href="{% url 'course' course.id %}">
							{% if course_list_show_subject %}
								{{ course.subject }}
							{% else %}
								{% with course.schedule.slots as slots %}
									{% if slots %}
										{{ slots|join:"<br />" }}
									{% else %}
										No dates set yet
									{% endif %}
								{% endwith %}
							{% endif %}
						</a>
					</large>
				</div>
				<div class="col-xs-6">
					{% if not course_list_show_subject %}
						<p>
							<b>Locations:</b>
							{% if slots %}
								{{ slots|join:", " }}
							{% else %}
								not set yet
							{% endif %}
						</p>
					{% endif %}
					<p><b>Teachers: </b>{{ course.teacher.all|join:", " }}</p>
					{% if not course_list_show_subject %}
						<p><b>Participants: </b>{{ course.participants.count }}/{{ course.max_participants }}</p>
					{% endif %}
					<p>
						<b>Locations:</b>
						{% with course.get_distinct_locations as locs %}
							{% if locs %}
								{{ locs|join:", " }}
							{% else %}
								none set yet
							{% endif %}
						{% endwith %}
					</p>

					{% if user.is_authenticated and not hide_actions %}
          	<p>
	            {% if user.student in course.teacher.all %}
	              You are teacher.
	              This course is currently {% if course.active %}active{% else %}suspended{% endif %}.
	            {% else %}
								{% if course in courses %}
									{% include "course/forms/unregister.html" %}
								{% elif course.joinable %}
									{% include "course/forms/register.html" %}
								{% else %}
									<form action="#"><input disabled="true" type="submit" class="btn btn-default" value="This course is full" /></form>
								{% endif %}
	            {% endif %}
            </p>
          {% endif %}
				</div>
			</div>
			<div><hr></div>

		{% endfor %}
	{% endwith %}
</div>
